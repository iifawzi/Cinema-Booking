swagger: '2.0'
info:
  version: '1.0'
  title: 'Ehgzly''s Application'
  description: >-
    Ehgzly application is one of the most succeeded startups in egypt, developed
    with love by Fawzi E. Abdulfattah. 
  contact:
    email: iifawzie@gmail.com
host: ehgzly.herokuapp.com
basePath: /api
paths:
  /deleteMovie:
    delete:
      tags:
      - "movies"
      summary: "to delete specific movie"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "needed Information to delete specific movie"
        required: true
        schema:
          $ref: "#/definitions/deleteMovie_body"
      responses:
        '200':
          description: 200 (Success - with "1 in data key")
          schema:
            $ref: '#/definitions/deleteMovie_response'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
        '401':
          description: 401 (Unauthorized - token's error)
          schema:
            $ref: '#/definitions/error_401'
  /getHallsForMovie:
    post:
      tags:
      - "halls"
      summary: "to get the halls of cinema that have the choosed movie"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "needed Information to get the halls"
        required: true
        schema:
          $ref: "#/definitions/getHallsForMovie_body"
      responses:
        '200':
          description: 200 (Success - will return empty array if didn't find movies)
          schema:
            $ref: '#/definitions/getHallsForMovie_response'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
  /getCinemasForMovie:
    post:
      tags:
      - "cinemas"
      summary: "to get the cinemas that have specific movie in specific city"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "needed Information to get the cinemas"
        required: true
        schema:
          $ref: "#/definitions/getCinemasForMovie_body"
      responses:
        '200':
          description: 200 (Success - will return empty array if didn't find movies)
          schema:
            $ref: '#/definitions/getCinemasForMovie_response'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
  /getMoviesInCity:
    post:
      tags:
      - "movies"
      summary: "to get the movies in specific city"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "needed Information to get the movies"
        required: true
        schema:
          $ref: "#/definitions/getMoviesInCity_body"
      responses:
        '200':
          description: 200 (Success - will return empty array if didn't find movies)
          schema:
            $ref: '#/definitions/getMoviesInCity_response'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
  /addSlot:
    post:
      tags:
      - "slots"
      summary: "add new slot"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "needed Information to add a slot"
        required: true
        schema:
          $ref: "#/definitions/addSlot_body"
      - in: "header"
        name: "authorization"
        required: true
        type: "string"          
      responses:
        '201':
          description: 201 (Created)
          schema:
            $ref: '#/definitions/addSlot_response'
        '401':
          description: 401 (Unauthorized - token's error)
          schema:
            $ref: '#/definitions/error_401'
        '403':
          description: 403 (Forbidden - Your aren't authorized)
          schema:
            $ref: '#/definitions/error_403'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
        '409':
          description: 409 (CONFLICT - There's an slot at the entered duration)
          schema:
            $ref: '#/definitions/error_409'
  /addHall:
    post:
      tags:
      - "halls"
      summary: "add new hall for cinemas"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "needed Information to add a hall"
        required: true
        schema:
          $ref: "#/definitions/addHall_body"
      - in: "header"
        name: "authorization"
        required: true
        type: "string"
      responses:
        '201':
          description: 201 (Created)
          schema:
            $ref: '#/definitions/addHall_response'
        '401':
          description: 401 (Unauthorized - token's error)
          schema:
            $ref: '#/definitions/error_401'
        '403':
          description: 403 (Forbidden - Your aren't authorized)
          schema:
            $ref: '#/definitions/error_403'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
        '409':
          description: 409 (CONFLICT - hall's name is already exists)
          schema:
            $ref: '#/definitions/error_409'
  /signinAdmin:
    post:
      tags:
      - "admins"
      summary: "signin for admins"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Required Information to signin"
        required: true
        schema:
          $ref: "#/definitions/signin_admin_body"
      responses:
        '200':
          description: 200 (Success - signin successfully)
          schema:
            $ref: '#/definitions/signin_admin_response'
        '401':
          description: 401 (Unauthorized - Username is not registered or Password is incorrect)
          schema:
            $ref: '#/definitions/error_401'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
  /addAdmin:
    post:
      tags:
      - "admins"
      summary: "Add admin"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Required Information to add admin"
        required: true
        schema:
          $ref: "#/definitions/add_admin_body"
      - in: "header"
        name: "authorization"
        required: true
        type: "string"
      responses:
        '200':
          description: 201 (Created - Movie Created Successfully)
          schema:
            $ref: '#/definitions/add_admin_response'
        '401':
          description: 401 (Unauthorized - token's error)
          schema:
            $ref: '#/definitions/error_401'
        '403':
          description: 403 (Forbidden - Your aren't authorized)
          schema:
            $ref: '#/definitions/error_403'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
        '409':
          description: 409 (CONFLICT - username is already registered)
          schema:
            $ref: '#/definitions/error_409'
  /signinCinema:
    post:
      tags:
      - "cinemas"
      summary: "signin for Cinema's accounts"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Required Information to signin"
        required: true
        schema:
          $ref: "#/definitions/signin_cinema_body"
      responses:
        '200':
          description: 200 (Success - signin successfully)
          schema:
            $ref: '#/definitions/signin_cinema_response'
        '401':
          description: 401 (Unauthorized - Username is not registered or Password is incorrect)
          schema:
            $ref: '#/definitions/error_401'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
  /addCinema:
    post:
      tags:
      - "cinemas"
      summary: "Add New movie"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Required Information to add new movie"
        required: true
        schema:
          $ref: "#/definitions/add_cinema_body"
      - in: "header"
        name: "authorization"
        required: true
        type: "string"
      responses:
        '200':
          description: 201 (Created - Movie Created Successfully)
          schema:
            $ref: '#/definitions/add_cinema_response'
        '401':
          description: 401 (Unauthorized - token's error)
          schema:
            $ref: '#/definitions/error_401'
        '403':
          description: 403 (Forbidden - Your aren't authorized)
          schema:
            $ref: '#/definitions/error_403'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
        '409':
          description: 409 (CONFLICT - username is already registered)
          schema:
            $ref: '#/definitions/error_409'
  /addMovie:
    post:
      tags:
      - "movies"
      summary: "Add New movie"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Required Information to add new movie"
        required: true
        schema:
          $ref: "#/definitions/add_movie_body"
      - in: "header"
        name: "authorization"
        required: true
        type: "string"
      responses:
        '200':
          description: 201 (Created - Movie Created Successfully)
          schema:
            $ref: '#/definitions/add_movie_response'
        '401':
          description: 401 (Unauthorized - token's error)
          schema:
            $ref: '#/definitions/error_401'
        '403':
          description: 403 (Forbidden - Your aren't authorized)
          schema:
            $ref: '#/definitions/error_403'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
  /signin:
    post:
      tags:
      - "users"
      summary: "Signin a user"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Required Information to sign a user"
        required: true
        schema:
          $ref: "#/definitions/signin_body"
      responses:
        '201':
          description: 201 (Success - User logined Successfully)
          schema:
            $ref: '#/definitions/signin_response'
        '401':
          description: 401 (Unauthorized - Phone number is not registered)
          schema:
            $ref: '#/definitions/error_401'
        '403':
          description: 403 (Forbidden - Phone number is blocked)
          schema:
            $ref: '#/definitions/error_403'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
  /signup:
    post:
      tags:
      - "users"
      summary: "Signup a new user"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Required Information to register a user"
        required: true
        schema:
          $ref: "#/definitions/signup_body"
      responses:
        '201':
          description: 201 (Created - User Created Successfully)
          schema:
            $ref: '#/definitions/signup_response'
        '409':
          description: 409 (CONFLICT - Phone number already registered)
          schema:
            $ref: '#/definitions/error_409'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
  /refresh_token:
    post:
      tags:
      - "users"
      summary: "To get a new token for specific user"
      description: ""
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "header"
        name: "authorization"
        required: true
        type: "string"
      - in: "body"
        name: "body"
        description: "Required Information to update the token"
        required: true
        schema:
          $ref: "#/definitions/refresh_token_body"
      responses:
        '200':
          description: 200 (Success - User's is updated successfully)
          schema:
            $ref: '#/definitions/refresh_token_response'
        '401':
          description: 401 (Unauthorized - Token is invalid or not provided - check the message -)
          schema:
            $ref: '#/definitions/error_401'
        '400':
          description: 400 (Bad Request - input is incorrect or missing)
          schema:
            $ref: '#/definitions/error_400'
definitions:
   deleteMovie_body:
    type: "object"
    example: 
     movie_id: 26
   deleteMovie_response:
    type: "object"
    example: 
      status: true
      message: success
      data: 1
   getHallsForMovie_body:
    type: "object"
    example: 
     cinema_id: 15
     movie_id: 7
   getHallsForMovie_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        - hall_id: 9
          hall_name: VIP-1
          hall_descriptopn: The best in the world
   getCinemasForMovie_body:
    type: "object"
    example: 
     city: Port Said
     country: Egypt
     movie_id: 16
   getCinemasForMovie_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        - cinema_id: 36
          cinema_name: El Crwan
          cinema_logo: logo.png
          cinema_description: the best cinema in the world
          contact_number: 01090243795
          country: Egypt
          city: Port Said
   getMoviesInCity_body:
    type: "object"
    example: 
     city: port said
     country: egypt
   getMoviesInCity_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        - movie_id: 7
          movie_name: The biggest one2
          cover: 'https://www.image.com'
          category: action
          description: The best movie ever2
          rate: 4
   addSlot_body:
    type: "object"
    example: 
     movie_id: 1
     hall_id: 1
     start_date: '2020-07-24'
     end_date: '2020-07-30'
     start_time: '23:30:00'
     end_time: '23:55:00'
     slot_status: false
   addSlot_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        slot_id: 22
        movie_id: 1
        hall_id: 1
        start_date: '2020-07-24'
        end_date: '2020-07-30'
        start_time: '23:30:00'
        end_time: '23:55:00'
        slot_status: false
   addHall_body:
    type: "object"
    example: 
     hall_name: "VIP-1"
     hall_description: "the best hall in the world"
     left_chairs: 30
     right_chairs: 30
     center_chairs: 40
     hall_status: false
   addHall_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        hall_stauts: false
        hall_id: 14
        hall_name: VIP-1
        hall_description: "the best hall in the world"
        cinema_id: 14
        left_chairs: 30
        right_chairs: 30
        center_chairs: 40
   signin_admin_body:
    type: "object"
    example: 
     username: iifawzi
     password: qwaszx
   signin_admin_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        admin_id: 1
        username: iifawzi
        first_name: Fawzi
        last_name: Abdulfattah
        role: admin
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImlpZmF3emkiLCJyb2xlIjoiY2luZW1hIiwiaWF0IjoxNTk1Mjk2NjY4LCJleHAiOjE1OTUzMzk4Njh9.7IQTVPUO3czW-sisdgoY9f4Hu-HGNJRYJZZ2pDvPIH8
   add_admin_body:
    type: "object"
    example: 
     first_name: Fawzi
     last_name: Abdulfattah
     username: iifawzi
     password: qwaszx
     role: admin
   add_admin_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        admin_id: 1
        first_name: Fawzi
        last_name: Abdulfattah
        username: iifawzi
        role: admin
   signin_cinema_body:
    type: "object"
    example: 
     username: crowann
     password: 12qwaszx
   signin_cinema_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        cinema_id: 1
        cinema_name: El Crwan
        contact_number: "01090243795"
        username: crowann
        country: Egypt
        city: Port Said
        cinema_status: false
        last_checkout: '1999-03-20T21:00:00.000Z'
        refresh_token: 7421ab7f50ef37a34cc63883f5f485fc
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImNyb3dhbm4iLCJyb2xlIjoiY2luZW1hIiwiaWF0IjoxNTk1Mjg5NzQ0LCJleHAiOjE1OTUzMzI5NDR9.fLD6ezsuQx4U_VfhorbgIx0C6rmbgRF3Yix3UjZzUr0
   add_cinema_body:
    type: "object"
    example: 
     cinema_name: El Crwan
     contact_number: "01090243795"
     cinema_logo: "logo.png"
     cinema_description: "the best in the world"
     username: crowan
     password: 12qwaszx
     country: Egypt
     city: Port Said
   add_cinema_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        cinema_status: false
        last_checkout: '1999-03-20T23:00:00'
        cinema_id: 10
        cinema_name: El Crwan
        username: crowann
        country: Egypt
        city: Port Said
   add_movie_body:
    type: "object"
    example: 
      movie_name: The biggest one2
      cover: 'https://www.google.com2'
      duration: 160
      category: action
      description: The best movie ever2
      rate: 4
   add_movie_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        movie_id: 1
        movie_name: The biggest one2
        cover: 'https://www.google.com2'
        duration: 160
        category: action
        description: The best movie ever2
        rate: 4
   refresh_token_body:
    type: "object"
    example: 
      refresh_token: 41e553cbd60fe02aec0e575e350b3982
   refresh_token_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwaG9uZV9udW1iZXIiOiIwMTA5MDI0Mzc5OSIsInVzZXJfaWQiOjEzLCJpYXQiOjE1OTQzMzIyOTEsImV4cCI6MTU5NDM3NTQ5MX0.EUgO0wpAQNjiieE40EzqdTLewEqf5OWibt99-U1U5HI
   signin_body:
    type: "object"
    example: 
      phone_number: 01090243795
   signin_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        user_id: 13
        phone_number: 01090243795
        first_name: fawzi
        last_name: essam
        country: egypt
        city: portsaid
        wallet: 0
        firebase_token: '93484893983498'
        refresh_token: 41e553cbd60fe02aec0e575e350b3982
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwaG9uZV9udW1iZXIiOiIwMTA5MDI0Mzc5OSIsInVzZXJfaWQiOjEzLCJpYXQiOjE1OTQzMzIyOTEsImV4cCI6MTU5NDM3NTQ5MX0.EUgO0wpAQNjiieE40EzqdTLewEqf5OWibt99-U1U5HI
   signup_body:
    type: "object"
    example: 
      phone_number: 01090243795
      first_name: fawzi
      last_name: essam
      country: egypt
      city: portsaid
      firebase_token: '93484893983498'
   signup_response:
    type: "object"
    example: 
      status: true
      message: success
      data:
        user_id: 13
        phone_number: 01090243795
        first_name: fawzi
        last_name: essam
        country: egypt
        city: portsaid
        wallet: 0
        firebase_token: '93484893983498'
        refresh_token: 41e553cbd60fe02aec0e575e350b3982
        token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwaG9uZV9udW1iZXIiOiIwMTA5MDI0Mzc5OSIsInVzZXJfaWQiOjEzLCJpYXQiOjE1OTQzMzIyOTEsImV4cCI6MTU5NDM3NTQ5MX0.EUgO0wpAQNjiieE40EzqdTLewEqf5OWibt99-U1U5HI
      
   error_409:
    type: "object"
    description: "CONFLICT"
    example:
      status: false
      message: "Error explaniation will be shown here"
      data: []
  
   error_401:
    type: "string"
    description: "Unauthorized"
    example:
      status: false
      message: "Error explaniation will be shown here"
      data: []
   error_400:
    type: "string"
    description: "Bad Request"
    example:
      status: false
      message: "Error explaniation will be shown here"
      data: []
   error_403:
    type: "string"
    description: "Forbidden"
    example:
      status: false
      message: "Error explaniation will be shown here"
      data: []
